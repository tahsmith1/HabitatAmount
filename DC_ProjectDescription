Data Carpentry Fall 2017 Project Description: Cactus bug data clean-up and analysis
Thomas AH Smith

The focus of this data carpentry project was to clean up and organize a dataset given to me in the form of an Rdata file.  The end goal of this project is to analyze the influence of surrounding local habitat versus traditional covariates of patch size and nearest neighbor distances on cactus bug abundances.  This data was collected from fifteen 50x50m experimental landscapes at Ordway Biological Station over the course of two years. These experimental landscapes consist of patchily distributed cactus (cactus bug habitat) in a non-habitat matrix of bare soil, grass, and forbes.  In between the two years, a removal experiment was conducted in which varying amounts of habitat (cactus patches) were destroyed in either a random or aggregated manner.  In the first year, surveys were conducted monthly at each patch to determine the number of cactus bugs present (and the rest of the community), while surveys were conducted twice monthly post treatment.

The data file (Habitat_amount_2014_2016.Rdata) that was given contained R objects that held information in two major data frames. The coordinates data frame has UTF locations for all cactus patches across the fifteen landscapes with columns for plot, patch, Easting, Northing, and patch area. The community data frame contains information for each survey for each patch with columns identifying patch, plot, survey date, individuals counted of different species and life stages (here Cheli.adults is the column of interest), habitat lost during treatment for each patch, vegetation data, and some calculated metrics such as nearest neighbor distance, buffer area, and connectivity (ifm).  This data frame contains a set of replicated rows initially.

The R script file (Scripts/DataSourceScript.R) initially created takes these two data frames (removing the duplicate rows in “community” and eventually saves the data as a series of csv files.  Initially, two loops are created to calculate an alternate version of buffer area using a modified distance matrix that calculate the furthest edge of every patch to the center of that patch. This code was modified from the original buffer area loop given in the R script along with the Rdata file (found in the data folder).  The second set of loops sums all the patch areas that are within the mean dispersal distance (of the cactus bug) of that patch using the modified distance matrix. These calculations were merged back with the community data frame and a total area which is the sum of the calculated buffer area and the patch area was added for each patch.  The months of each survey needed to be extracted from the dates inb order to subset observations only the months of August through November which was added as an additional numeric column. Because the calculations of buffer area are done using a circle with a radius of 12.5 (mean dispersal distance), the plots needed to be subsetted to only use patches that are farther than this distance away from the plot edge. This was performed using code in Scripts/subsetcalcs.R and an additional data frame (subsetmerge.csv) was created that included only observations from these patches. The two new community data frames were saved as csv to use in later analyses (as well as two additional subsets that were not used for final analyses).

The second part of the data manipulation occurs in the PreAnalysisSource.R script in the Scripts subfolder.  The saved community csv file created from the previous script is read into the environment.  It is subsetted by year and then by the month of Aug-Nov in order to get only observations that occurred after treatment effects had stabilized. For the 2015 data, a loop is used to take only observations for the 1st, 3rd, and 5th survey in this time frame corresponding with the first survey of the month. This had to be conducted by ordering the surveys by survey number and indexing the 1st , 3rd , and 5th  because some patches were surveyed 6 times and others 7. For the 2014 data, all observation for patches that were removed between 2014 and 2015 were taken out from the dataset.  The plot, patch, and year columns were made into factor for proper input into model functions.  The three plots that had no habitat removed (control plots for different analyses) were also removed from the data frame.  The resulting data were subsetted to only patches farther than 12.5m from the edge as before.  This script can be sourced and resulting objects can be used in the analysis script (Scripts/ZipAnalysis.R).

The cleaned up dataset was able to be used in the proper zero-inflated mixed model analysis in R. This will help me going forward as this data will be similar to that collected for my dissertation.  Additionally, the analysis resulting from this project will be used to develop a manuscript for submission to scientific journals. 
